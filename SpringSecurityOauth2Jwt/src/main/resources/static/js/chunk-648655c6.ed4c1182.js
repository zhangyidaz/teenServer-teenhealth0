(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-648655c6","chunk-2d219f9b","chunk-2d209afc"],{"32d7":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("d2-container",{class:{"page-compact":e.crud.pageOptions.compact}},[r("template",{slot:"header"},[e._v("资源管理 "),r("example-helper",{attrs:{title:"权限管理帮助"}},[r("div",[r("h3",[e._v("如何启用权限管理，请点击下面帮助链接")]),r("link-button",{attrs:{href:"http://greper.gitee.io/d2-crud-plus/guide/permission.html"}},[e._v("权限管理帮助文档")])],1)])],1),r("d2-crud-x",e._g(e._b({ref:"d2Crud",on:{"add-sub-resource":e.handleAddSubResource}},"d2-crud-x",e._crudProps,!1),e._crudListeners),[r("div",{attrs:{slot:"header"},slot:"header"},[r("crud-search",{ref:"search",attrs:{options:e.crud.searchOptions},on:{submit:e.handleSearch}}),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"permission:resource:add",expression:"'permission:resource:add'"}],attrs:{slot:"header",size:"small",type:"primary"},on:{click:e.addRootRow},slot:"header"},[r("i",{staticClass:"el-icon-plus"}),e._v(" 新增")]),r("crud-toolbar",{attrs:{search:e.crud.searchOptions.show,compact:e.crud.pageOptions.compact,columns:e.crud.columns},on:{"update:search":function(t){return e.$set(e.crud.searchOptions,"show",t)},"update:compact":function(t){return e.$set(e.crud.pageOptions,"compact",t)},refresh:function(t){return e.doRefresh()},"columns-filter-changed":e.handleColumnsFilterChanged}})],1)])],2)},o=[],i=r("a9b0"),u=r("1fbf"),c=r("ba17"),a=r("aa6f"),s=r.n(a),l={name:"Resource",mixins:[u["d2CrudPlus"].crud],data:function(){return{}},methods:{getCrudOptions:function(){return Object(i["crudOptions"])(this)},pageRequest:function(e){var t=this;return Object(c["GetTree"])(e).then((function(e){var r=e.data;return e.data={current:1,size:1e4,total:100,records:r},setTimeout((function(){var e=t.getD2Crud().$refs.elTable.store.states.treeData;null!=e&&s()(e,(function(e,t){e.children&&e.level<=1&&(e.expanded=!0)}))}),1),e}))},clearResourceTreeDictCache:function(){u["d2CrudPlus"].util.dict.clear("/permission/manager/resource/tree")},addRequest:function(e){return this.clearResourceTreeDictCache(),Object(c["AddObj"])(e)},updateRequest:function(e){return this.clearResourceTreeDictCache(),Object(c["UpdateObj"])(e)},delRequest:function(e){return this.clearResourceTreeDictCache(),Object(c["DelObj"])(e.id)},infoRequest:function(e){return Object(c["GetObj"])(e.id)},handleAddSubResource:function(e){e.index;var t=e.row;this.addRow({parentId:t.id})},addRootRow:function(){this.addRow({parentId:0})}}},d=l,p=r("2877"),f=Object(p["a"])(d,n,o,!1,null,null,null);t["default"]=f.exports},a9b0:function(e,t,r){"use strict";r.r(t),r.d(t,"crudOptions",(function(){return o}));var n=r("22ce"),o=function(e){return{rowHandle:{view:{thin:!0,text:null,disabled:function(){return!e.hasPermissions("permission:resource:view")}},edit:{thin:!0,text:null,disabled:function(){return!e.hasPermissions("permission:resource:edit")}},remove:{thin:!0,text:null,disabled:function(){return!e.hasPermissions("permission:resource:del")}},custom:[{thin:!0,text:null,type:"primary",size:"small",emit:"add-sub-resource",icon:"el-icon-plus",disabled:function(){return!e.hasPermissions("permission:resource:add")}}],width:180,fixed:"right"},options:{height:"100%",highlightCurrentRow:!0,rowKey:"id"},columns:[{title:"资源名称",key:"title",sortable:!0,search:{},form:{component:{props:{placeholder:"菜单名称"}}},width:200},{title:"图标",key:"icon",sortable:!1,type:"icon-selector",width:60},{title:"资源代码",key:"name",sortable:!0,search:{},form:{component:{props:{placeholder:"路由的name"}}},width:170},{title:"权限代码",key:"permission",sortable:!0,search:{},form:{component:{props:{placeholder:"aaa:bbb:ccc"}}},width:170},{title:"路由地址",key:"path",sortable:!0,search:{},form:{component:{props:{placeholder:"permission/resource"}}},width:180},{title:"路由组件",key:"component",sortable:!0,search:{},form:{component:{props:{placeholder:""}},helper:"最顶层的菜单必须配置为layoutHeaderAside。子菜单配置组件路径，例如/permission/views/resource"},width:180},{title:"排序",key:"sort",sortable:!0},{title:"资源类型",key:"type",type:"select",align:"center",width:100,search:{},dict:{url:"/base/dicts/ResourceTypeEnum",getData:function(e,t){return Object(n["a"])({url:e}).then((function(e){return e.data}))}},form:{rules:[{required:!0,message:"请选择资源类型"}]},sortable:!0},{title:"id",key:"id",form:{disabled:!0},sortable:!0},{title:"父节点",key:"parentId",sortable:!0,width:100,type:"tree-selector",dict:{url:"/permission/manager/resource/tree",isTree:!0,value:"id",label:"title",getData:function(e,t){return Object(n["a"])({url:e}).then((function(e){return[{id:0,title:"根节点",children:e.data}]}))}},form:{component:{props:{multiple:!1,elProps:{defaultExpandAll:!0},dict:{cache:!1}}}}}]}}},aa6f:function(e,t){var r=9007199254740991,n="[object Arguments]",o="[object Function]",i="[object GeneratorFunction]",u=/^(?:0|[1-9]\d*)$/;function c(e,t){var r=-1,n=e?e.length:0;while(++r<n)if(!1===t(e[r],r,e))break;return e}function a(e,t){var r=-1,n=Array(e);while(++r<e)n[r]=t(r);return n}function s(e,t){return function(r){return e(t(r))}}var l=Object.prototype,d=l.hasOwnProperty,p=l.toString,f=l.propertyIsEnumerable,h=s(Object.keys,Object);function m(e,t){var r=C(e)||x(e)?a(e.length,String):[],n=r.length,o=!!n;for(var i in e)!t&&!d.call(e,i)||o&&("length"==i||w(i,n))||r.push(i);return r}var b=y(O),v=j();function O(e,t){return e&&v(e,t,G)}function g(e){if(!k(e))return h(e);var t=[];for(var r in Object(e))d.call(e,r)&&"constructor"!=r&&t.push(r);return t}function y(e,t){return function(r,n){if(null==r)return r;if(!A(r))return e(r,n);var o=r.length,i=t?o:-1,u=Object(r);while(t?i--:++i<o)if(!1===n(u[i],i,u))break;return r}}function j(e){return function(t,r,n){var o=-1,i=Object(t),u=n(t),c=u.length;while(c--){var a=u[e?c:++o];if(!1===r(i[a],a,i))break}return t}}function w(e,t){return t=null==t?r:t,!!t&&("number"==typeof e||u.test(e))&&e>-1&&e%1==0&&e<t}function k(e){var t=e&&e.constructor,r="function"==typeof t&&t.prototype||l;return e===r}function R(e,t){var r=C(e)?c:b;return r(e,"function"==typeof t?t:S)}function x(e){return D(e)&&d.call(e,"callee")&&(!f.call(e,"callee")||p.call(e)==n)}var C=Array.isArray;function A(e){return null!=e&&_(e.length)&&!T(e)}function D(e){return q(e)&&A(e)}function T(e){var t=P(e)?p.call(e):"";return t==o||t==i}function _(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}function P(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function q(e){return!!e&&"object"==typeof e}function G(e){return A(e)?m(e):g(e)}function S(e){return e}e.exports=R},ba17:function(e,t,r){"use strict";r.r(t),r.d(t,"GetList",(function(){return i})),r.d(t,"GetTree",(function(){return u})),r.d(t,"AddObj",(function(){return c})),r.d(t,"UpdateObj",(function(){return a})),r.d(t,"DelObj",(function(){return s})),r.d(t,"GetObj",(function(){return l}));var n=r("22ce"),o="/permission/manager/resource";function i(e){return Object(n["a"])({url:o+"/page",method:"get",params:e})}function u(e){return Object(n["a"])({url:o+"/tree",method:"get",params:e})}function c(e){return Object(n["a"])({url:o+"/add",method:"post",data:e})}function a(e){return Object(n["a"])({url:o+"/update",method:"post",data:e})}function s(e){return Object(n["a"])({url:o+"/delete",method:"post",params:{id:e}})}function l(e){return Object(n["a"])({url:o+"/info",method:"get",params:{id:e}})}}}]);