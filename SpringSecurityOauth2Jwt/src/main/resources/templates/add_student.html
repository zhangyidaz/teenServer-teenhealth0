<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9"> <![endif]-->
<!--[if !IE]><!--> <html lang="en" xmlns:th="http://www.thymeleaf.org"> <!--<![endif]-->
<!-- BEGIN HEAD -->
<head>
   <meta charset="utf-8" />
   <title>添加学生</title>
   <meta content="width=device-width, initial-scale=1.0" name="viewport" />
   <meta content="" name="description" />
   <meta content="" name="author" />
   <link href="/assets/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
   <link href="/assets/bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet" />
   <link href="/assets/bootstrap/css/bootstrap-fileupload.css" rel="stylesheet" />
   <link href="/assets/font-awesome/css/font-awesome.css" rel="stylesheet" />
   <link href="/css/style.css" rel="stylesheet" />
   <link href="/css/style_responsive.css" rel="stylesheet" />
   <link href="/css/style_default.css" rel="stylesheet" id="style_color" />

    <link href="/assets/fancybox/source/jquery.fancybox.css" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="/assets/gritter/css/jquery.gritter.css" />
    <link rel="stylesheet" type="text/css" href="/assets/uniform/css/uniform.default.css" />
    <link rel="stylesheet" type="text/css" href="/assets/chosen-bootstrap/chosen/chosen.css" />
    <link rel="stylesheet" type="text/css" href="/assets/jquery-tags-input/jquery.tagsinput.css" />
    <link rel="stylesheet" type="text/css" href="/assets/clockface/css/clockface.css" />
    <link rel="stylesheet" type="text/css" href="/assets/bootstrap-wysihtml5/bootstrap-wysihtml5.css" />
    <link rel="stylesheet" type="text/css" href="/assets/bootstrap-datepicker/css/datepicker.css" />
    <link rel="stylesheet" type="text/css" href="/assets/bootstrap-timepicker/compiled/timepicker.css" />
    <link rel="stylesheet" type="text/css" href="/assets/bootstrap-colorpicker/css/colorpicker.css" />
    <link rel="stylesheet" href="/assets/bootstrap-toggle-buttons/static/stylesheets/bootstrap-toggle-buttons.css" />
    <link rel="stylesheet" href="/assets/data-tables/DT_bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="/assets/bootstrap-daterangepicker/daterangepicker.css" />
</head>
<!-- END HEAD -->
<!-- BEGIN BODY -->
<body class="fixed-top">
   <!-- BEGIN HEADER -->
   <div th:replace="commons/bars::topbar"></div>
   <!-- END HEADER -->
   <!-- BEGIN CONTAINER -->
   <div id="container" class="row-fluid">
      <!-- BEGIN SIDEBAR -->
       <div th:replace="commons/bars::#sidebar(activeUri='')"></div>
      <!-- END SIDEBAR -->
      <!-- BEGIN PAGE -->  
      <div id="main-content">
         <!-- BEGIN PAGE CONTAINER-->
         <div class="container-fluid">
            <!-- BEGIN PAGE HEADER-->   
            <div class="row-fluid">
               <div class="span12">
                   <!-- BEGIN THEME CUSTOMIZER-->
                   <div id="theme-change" class="hidden-phone">
                       <i class="icon-cogs"></i>
                       <span class="settings">
                            <span class="text">主题:</span>
                            <span class="colors">
                                <span class="color-default" data-style="default"></span>
                                <span class="color-gray" data-style="gray"></span>
                                <span class="color-purple" data-style="purple"></span>
                                <span class="color-navy-blue" data-style="navy-blue"></span>
                            </span>
                        </span>
                   </div>
                   <!-- END THEME CUSTOMIZER-->
                  <h3 class="page-title">
                     学生概况
                     <small>学生信息</small>
                  </h3>
                   <ul class="breadcrumb">
                       <li>
                           <a href="/teacher/homepage"><i class="icon-home"></i></a><span class="divider">&nbsp;</span>
                       </li>
                       <li>
                           <a href="/teacher/studentList">学生信息</a> <span class="divider">&nbsp;</span>
                       </li>
                       <li><a href="#">添加学生用户</a><span class="divider-last">&nbsp;</span></li>
                   </ul>
               </div>
            </div>
            <!-- END PAGE HEADER-->
             <div class="row-fluid">
                 <div class="span12">
                     <!-- BEGIN SAMPLE FORM widget-->
                     <div class="widget">
                         <div class="widget-title">
                             <h3><i class="icon-reorder"></i>添加学生</h3>
                             <span class="tools">
                                <a href="javascript:;" class="icon-chevron-down"></a>
                                <a href="javascript:;" class="icon-remove"></a>
                             </span>
                         </div>
                         <div class="widget-body form">
                             <!-- BEGIN FORM-->
                             <form th:action="@{/teacher/addstudent}" method="post" class="form-horizontal">

                                 <div class="control-group">
                                     <label class="control-label">选择年级</label>
                                     <div class="controls">
                                         <select name="id" id="gradeid" class="span4 chosen" data-placeholder="Choose a Category" tabindex="1">
                                             <option value="">请选择年级</option>
                                             <option th:value="${grade.getId()}" th:each="grade:${grades}" th:text="${grade.getGradeName()}">1</option>
                                         </select>
                                     </div>
                                 </div>
                                 <div class="control-group">
                                     <label class="control-label">选择班级</label>
                                     <div id="class_list" class="controls">
                                         <select id="classList" name="classId" class="span4" data-placeholder="Choose a Category" tabindex="1">
                                             <option value="">请选择班级</option>
                                         </select>
                                     </div>
                                 </div>

                                 <div class="control-group">
                                     <label id="warn" class="control-label" >学号</label>
                                     <div class="controls">
                                         <input id="studentno" name="studentNo" type="text" required="required" class="span4 " placeholder="字母与数字组合"/>
                                         <span id="sno" class="help-inline"></span>
                                     </div>
                                 </div>
                                 <div class="control-group">
                                     <label class="control-label">姓名</label>
                                     <div class="controls">
                                         <input name="studentName" type="text" class="span4 " required="required" placeholder="不超过30字符"/>
                                         <span class="help-inline"></span>
                                     </div>
                                 </div>
                                 <div class="control-group">
                                     <label class="control-label">性别</label>
                                     <div class="controls">
                                         <label class="radio">
                                             <input type="radio" name="sex" value="1" />
                                             男
                                         </label>
                                         <label class="radio">
                                             <input type="radio" name="sex" value="2" />
                                             女
                                         </label>
                                     </div>
                                 </div>
                                 <div class="control-group">
                                     <label class="control-label">年龄</label>
                                     <div class="controls">
                                         <input name="age" type="text" required="required" class="span4" />
                                         <span class="help-inline"></span>
                                     </div>
                                 </div>
                                 <div class="control-group">
                                     <label class="control-label">身高</label>
                                     <div class="controls">
                                         <input name="stature" type="text" required="required" class="span4  popovers" data-trigger="hover"
                                                data-content="单位：厘米（cm）" data-original-title="提示" />
                                     </div>
                                 </div>
                                 <div class="control-group">
                                     <label class="control-label">体重</label>
                                     <div class="controls">
                                         <input name="weight" type="text" required="required" class="span4  popovers" data-trigger="hover"
                                                data-content="单位：公斤（kg）" data-original-title="提示" />
                                     </div>
                                 </div>
                                 <div class="control-group">
                                     <label class="control-label">左眼视力</label>
                                     <div class="controls">
                                         <select name="leftSight" class="input-medium m-wrap" required="required" tabindex="1">
                                             <option value="2.0">2.0</option>
                                             <option value="1.5">1.5</option>
                                             <option value="1.2">1.2</option>
                                             <option value="1.0">1.0</option>
                                             <option value="0.8">0.8</option>
                                             <option value="0.6">0.6</option>
                                             <option value="0.5">0.5</option>
                                             <option value="0.4">0.4</option>
                                             <option value="0.3">0.3</option>
                                             <option value="0.25">0.25</option>
                                             <option value="0.2">0.2</option>
                                             <option value="0.15">0.15</option>
                                             <option value="0.12">0.12</option>
                                             <option value="0.1">0.1</option>
                                         </select>
                                     </div>
                                 </div>
                                 <div class="control-group">
                                     <label class="control-label">右眼视力</label>
                                     <div class="controls">
                                         <select name="rightSight" class="input-medium m-wrap"required="required" tabindex="1">
                                             <option value="2.0">2.0</option>
                                             <option value="1.5">1.5</option>
                                             <option value="1.2">1.2</option>
                                             <option value="1.0">1.0</option>
                                             <option value="0.8">0.8</option>
                                             <option value="0.6">0.6</option>
                                             <option value="0.5">0.5</option>
                                             <option value="0.4">0.4</option>
                                             <option value="0.3">0.3</option>
                                             <option value="0.25">0.25</option>
                                             <option value="0.2">0.2</option>
                                             <option value="0.15">0.15</option>
                                             <option value="0.12">0.12</option>
                                             <option value="0.1">0.1</option>
                                         </select>
                                     </div>
                                 </div>
                                 <div class="form-actions">
                                     <button type="submit" class="btn btn-success">保存</button>
                                     <button type="button" class="btn">取消</button>
                                 </div>
                             </form>
                             <!-- END FORM-->
                         </div>
                     </div>
                     <!-- END SAMPLE FORM widget-->
                 </div>
             </div>

            <!-- END PAGE CONTENT-->         
         </div>
         <!-- END PAGE CONTAINER-->
      </div>
      <!-- END PAGE -->  
   </div>
   <!-- END CONTAINER -->
   <!-- 引入页面底部 -->
   <div th:replace="commons/bars::#footer"></div>
   <!-- END FOOTER -->
   <!-- BEGIN JAVASCRIPTS -->    
   <!-- Load javascripts at bottom, this will reduce page load time -->
   <script src="/js/jquery-1.8.3.min.js"></script>
   <script src="/assets/bootstrap/js/bootstrap.min.js"></script>
   <script src="/js/jquery.blockui.js"></script>
   <!-- ie8 fixes -->
   <!--[if lt IE 9]>
   <script src="/js/excanvas.js"></script>
   <script src="/js/respond.js"></script>
   <![endif]-->
   <script type="text/javascript" src="/assets/chosen-bootstrap/chosen/chosen.jquery.min.js"></script>
   <script type="text/javascript" src="/assets/uniform/jquery.uniform.min.js"></script>
   <script src="/js/scripts.js"></script>
   <script>
      jQuery(document).ready(function() {       
         // initiate layout and plugins
         App.init();
      });
   </script>

   <script>
<!--   根据年级获取班级列表    -->
       $("#gradeid").change(function () {
           // 获取 token
           var token = $("input[name='_csrf']").val();
           var headers = {"X-CSRF-TOKEN": token};
           $("#classList").html("");
           var val=$("#gradeid option:selected").val();
           var data={"data":val};
           var url = "getClassList";
           $.ajax({
               type:"POST",
               url:url,
               dataType:"json",
               data:JSON.stringify(data),
               contentType:"application/json",
               async:false,
               cache:false,
               headers:headers,
               success:function (data) {
                   $("#classList").empty();
                   $("#classList").append(new Option("",""));
                   for(var i=0;i<data.length;i++){
                       $("#classList").append("<option value='"+data[i].id+"'>"+data[i].className+"</option>");
                   }
               }
           })
       })
       //检查学号是否重复
       $("#studentno").focusout(function () {
           $("#sno").html("");
           var val = $("#studentno").val();
           if (val != null && val != '') {
               checkStudentNo(val);
           }
       });
       function checkStudentNo(studentno){
           $.ajax({
               type:"GET",
               dataType:"json",
               url:"/teacher/checkstudentNo/"+studentno,
               contentType:"application/json",
               async:false,
               cache:false,
               // headers:headers,
               success:function (data) {
                   if(data==1){
                       $("#studentno").empty();
                       $("#sno").append("<span>"+"学号已经存在！"+"</span>");
                       $("#sno").append("<i class='icon-exclamation-sign'>"+"</i>");
                   }
               }

           })
       }
   </script>

   <!-- END JAVASCRIPTS -->   
</body>
<!-- END BODY -->
</html>